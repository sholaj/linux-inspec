---
# Validation tasks for MSSQL InSpec role

- name: Validate required connection parameters
  assert:
    that:
      - mssql_server | length > 0
      - mssql_port | int > 0
      - mssql_database | length > 0
      - mssql_username | length > 0
      - mssql_password | length > 0
    fail_msg: "Required MSSQL connection parameters are missing or empty"
  no_log: true

- name: Validate MSSQL version
  assert:
    that:
      - mssql_version in supported_mssql_versions
    fail_msg: "Unsupported MSSQL version '{{ mssql_version }}'. Supported: {{ supported_mssql_versions | join(', ') }}"
