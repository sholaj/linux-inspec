---
# Oracle parameter validation tasks

- name: Handle sensitive Oracle connection parameters
  block:
    - name: Set Oracle database connection parameters
      ansible.builtin.set_fact:
        oracle_connection:
          server: "{{ oracle_server }}"
          port: "{{ oracle_port }}"
          database: "{{ oracle_database }}"
          service: "{{ oracle_service | default('') }}"
          username: "{{ oracle_username }}"
          password: "{{ oracle_password }}"
          version: "{{ oracle_version }}"

    - name: Validate required Oracle parameters
      ansible.builtin.assert:
        that:
          - oracle_server is defined and oracle_server | length > 0
          - oracle_port is defined and oracle_port | int > 0
          - oracle_database is defined and oracle_database | length > 0
          - oracle_version is defined and oracle_version | length > 0
          - oracle_username is defined and oracle_username | length > 0
          - oracle_password is defined and oracle_password | length > 0
        fail_msg: "Missing required Oracle connection parameters"
        success_msg: "All Oracle parameters validated successfully"
  no_log: true


