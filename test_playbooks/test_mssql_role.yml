---
# Test playbook for mssql_inspec role
# Tests both localhost and delegate modes

- name: Test MSSQL InSpec Role
  hosts: runner
  gather_facts: true

  vars:
    # MSSQL connection parameters
    mssql_server: "10.0.2.4"
    mssql_port: 1433
    mssql_database: "master"
    mssql_username: "sa"
    # mssql_password loaded from inventory or vault
    mssql_version: "2019"

    # Role configuration
    inspec_results_dir: "/tmp/inspec_mssql_results"
    inspec_debug_mode: true
    generate_summary_report: true
    cleanup_temp_files: true

    # Execution mode: empty or "localhost" for local, hostname for delegate
    inspec_delegate_host: ""

  roles:
    - role: mssql_inspec
