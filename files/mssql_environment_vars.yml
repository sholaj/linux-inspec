---
# mssql_environment_vars.yml
# Centralized environment variable definitions for MSSQL InSpec scanning
#
# Include this file in your playbook or role to ensure consistent
# PATH configuration across all execution environments.
#
# Usage in playbook:
#   vars_files:
#     - mssql_environment_vars.yml
#
# Usage in role defaults:
#   Copy these variables to mssql_inspec/defaults/main.yml

# ============================================================================
# BINARY PATHS
# ============================================================================

# Microsoft SQL Server Tools
# Location of sqlcmd binary - adjust based on your installation
sqlcmd_bin_path: "/opt/mssql-tools/bin"

# Alternative locations (uncomment if needed):
# sqlcmd_bin_path: "/opt/mssql-tools18/bin"  # For newer mssql-tools versions
# sqlcmd_bin_path: "/usr/local/bin"           # If symlinked

# Sybase Tools
# Location of Sybase isql and related binaries
sybase_bin_path: "/tools/ver/sybase/OCS-16_0/bin"

# Oracle Libraries
# Required for Oracle database connectivity
oracle_lib_path: "/tools/ver/oracle-19.16.0.0-64"

# ============================================================================
# COMBINED PATH EXPORT
# ============================================================================

# Full PATH string for shell export
# This combines all required paths with standard system paths
mssql_full_path: "{{ sqlcmd_bin_path }}:{{ sybase_bin_path }}:/usr/local/bin:/usr/bin:/bin"

# ============================================================================
# INSPEC CONFIGURATION
# ============================================================================

# InSpec binary location
inspec_bin_path: "/usr/bin/inspec"

# Default timeout for InSpec execution (in seconds)
inspec_command_timeout: 1800  # 30 minutes

# Async execution timeout
inspec_async_timeout: 3600    # 1 hour

# Poll interval for async tasks
inspec_poll_interval: 30      # 30 seconds

# ============================================================================
# DELEGATE HOST CONFIGURATION
# ============================================================================

# Default delegate host for InSpec execution
# Override in inventory or extra vars for your environment
inspec_delegate_host: "localhost"

# ============================================================================
# DEBUG CONFIGURATION
# ============================================================================

# Enable debug output (set to true for troubleshooting)
inspec_debug_mode: false

# ============================================================================
# LEGACY COMPATIBILITY
# ============================================================================

# For backward compatibility with existing configurations
# Maps to the mssql_environment dictionary format

mssql_environment:
  PATH: "{{ mssql_full_path }}"
  LD_LIBRARY_PATH: "{{ oracle_lib_path }}"
  INSPEC_BACKEND: "local"

# ============================================================================
# SHELL EXPORT TEMPLATE
# ============================================================================

# Use this in shell tasks to export the correct PATH
# Copy this into your shell block:
#
#   shell: |
#     export PATH={{ sqlcmd_bin_path }}:{{ sybase_bin_path }}:/usr/local/bin:/usr/bin:/bin:$PATH
#     export LD_LIBRARY_PATH={{ oracle_lib_path }}:$LD_LIBRARY_PATH
#     /usr/bin/inspec exec ...

# ============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# ============================================================================

# Development environment paths (uncomment and modify as needed)
# dev_sqlcmd_bin_path: "/opt/mssql-tools/bin"
# dev_sybase_bin_path: "/tools/ver/sybase/OCS-16_0/bin"

# Production environment paths (uncomment and modify as needed)
# prod_sqlcmd_bin_path: "/opt/mssql-tools/bin"
# prod_sybase_bin_path: "/tools/ver/sybase/OCS-16_0/bin"

# UAT environment paths (uncomment and modify as needed)
# uat_sqlcmd_bin_path: "/opt/mssql-tools/bin"
# uat_sybase_bin_path: "/tools/ver/sybase/OCS-16_0/bin"
